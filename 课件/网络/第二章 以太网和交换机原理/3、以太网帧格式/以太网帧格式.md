---
typora-root-url: E:\班里\网络基础\网络基础整理与答案\第二章-以太网和交换机原理-day2\images
---

# 以太网帧格式

**数据包**在**以太网**物理介质上**传播**之前**必须封装头部和尾部信息**。**封装后的数据包称为称为数据帧**，数据帧中封装的信息决定了数据如何传输。以太网上传输的数据帧有两种格式， **选择哪种格式由TCP/IP协议簇中的网络层决定**。



![wps1](/../../../../../../images/wps1.png)

**数据链路层控制数据帧在物理链路上传输**



# 帧结构图解

![wps1](/../../../../../../images/wps2.png)

以太帧中还包括源和目的MAC地址，分别代表发送者的MAC和接收者的MAC，此外还有帧校验序列字段，用于检验传输过程中帧的完整性。

Ethernet_II的帧中各字段说明如下：



1、**DMAC**（Destination MAC）是**目的MAC地址**。DMAC字段长度为6个字节，标识帧的**接收者**。

2、**SMAC**（Source MAC）是**源MAC地址**。SMAC字段长度为6个字节，标识帧的**发送者**。

3、**类型字段**（Type）用于**标识数据字段中包含的高层协议**，该字段长度为2个字节。类型字段取值为0x0800的帧代表IP协议帧；类型字段取值为0806的帧代表ARP协议帧。

4、**数据字段**(Data)是**网络层数据**，最小长度必须为46字节以保证帧长至少为64字节，数据字段的最大长度为1500字节。



![wps1](/../../../../../../images/wps3.png)

5、**循环冗余校验**字段（FCS）提供了一种**错误检测机制**。该字段长度为4个字节。

IEEE802.3帧格式类似于Ethernet_II帧，只是Ethernet_II帧的Type域被802.3帧的Length域取代，并且占用了Data字段的8个字节作为LLC和SNAP字段。

\1. Length字段定义了Data字段包含的字节数。

\2. **逻辑链路控制LLC**（Logical Link Control）由目的服务**访问点DSAP**（ Destination Service Access Point ） 、源服务**访问点SSAP** （Source Service Access Point）和Control字段组成。

\3. SNAP（Sub-network Access Protocol）由机构代码（Org Code） 和类型

（Type）字段组成。Org code三个字节都为0。Type字段的含义与Ethernet_II帧中的Type字段相同。IEEE802.3帧根据DSAP和SSAP字段的取值又可分为以下几类：

1) 当DSAP和SSAP都取特定值0xff时，802.3帧就变成了Netware-ETHERNET 帧，用来承载NetWare类型的数据。

2） 当DSAP和SSAP都取特定值0xaa时，802.3帧就变成了ETHERNET_SNAP帧。ETHERNET_SNAP帧可以用于传输多种协议。

3  )

![wps4](/../../../../../../images/wps4.png)

目标地址：.
源地址：.
**长度**：帧包含的数据量必须小于或等于1500（16进制的05DC）；
**DSAP**：目标服务存取点（Destination  Service Access Point） = 0xAA；
**SSAP**：源服务存取点（Source Service Access  Point）= 0xAA；
**控制**：无连接或面向连接的C；
厂商代码:.
协议类型: 封装在 IEEE 802 网络中的协议.

**IP**    =  0x0800
**ARP** =  0x0806 

**数据**：高层协议、数据和填充符;
**FCS**：数据帧校验序列，用于确定数据包在传输过程中是否损坏。



DSAP和SSAP其他的取值均为纯IEEE802.3帧。

## 帧发送过程

帧从主机的物理接口发送出来后，通过传输介质传输到目的端。共享网络中，这个帧可能到达多个主机。主机检查帧头中的目的MAC地址，如果目的MAC地址不是本机MAC地 址，也不是本机侦听的组播或广播MAC地址，则主机会丢弃收到的帧。如果目的MAC地址是本机MAC地址，则接收该帧，检查帧校验序列（FCS）字段，并与本机计算的值对比来 确定帧在传输过程中是否保持了完整性。如果帧的FCS值与本机计算的值不同，主机会认为帧已被破坏，并会丢弃该帧。如果该帧通过了FCS校验，则主机会根据帧头部中的Type字 段来确定将帧发送给上层哪个协议处理。Type字段的值为0x0800，表明该帧需要发送到IP 协议上处理。在发送给IP协议之前，帧的头部和尾部会被剥掉。



##  以太网上使用两种标准帧格式

以太网上使用两种标准帧格式。第一种是上世纪80年代初提出的DIX v2 格式，即Ethernet II帧格式。Ethernet II后来被IEEE 802标准接纳，并写进了IEEE 802.3x-1997的3.2.6节。第二种是1983年提出的IEEE 802.3 格式。这两种格式的主要区别在于，Ethernet II格式中包含一个Type字段，标识以太帧处理完成之后将被发送到哪个上层协议进行处理。IEEE802.3格式中，同样的位置是长度字段。

不同的Type字段值可以用来区别这两种帧的类型，当Type字段值小于等于1500（或者十六进制的0x05DC）时，帧使用的是IEEE 802.3格式。当Type字段值大于等于1536 （或者十六进制的0x0600）时，帧使用的是Ethernet II格式。以太网中大多数的数据帧使用的是Ethernet II格式。



# **课后练习题：**

1、常用的以太网帧都有哪两种？

2、详细描述以太网Ethernet_II的帧的构成

3、网络设备如何确定以太网数据帧的上层协议？

4、终端设备接收到数据帧时，会如何处理？