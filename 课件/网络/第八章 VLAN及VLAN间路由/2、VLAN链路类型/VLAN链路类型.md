# **VLAN链路类型**

**由于采用了VLAN技术，设备间的链路也就出现了不同的类型。VLAN链路分为两种类型： Access链路和Trunk链路。**

**接入链路（Access Link）** ：连接用户**主机和交换机**的链路称为接入链路，接入链路上通过的帧一般是**不带tag**的标准帧。

**干道链路（Trunk Link）** ：连接**交换机和交换机**的链路称为干道链路。 干道链路上通过的帧一般为**带Tag的**VLAN帧。

![wps1](E:\班里\网络基础\网络基础整理与答案\第八章 VLAN及VLAN间路由-day4\images\wps1.png)

**PVID即Port VLAN ID**， 代表端口的缺省VLAN。 **交换机从对端设备收到的帧有可能是Untagged的数据帧**， 但**所有以太网帧在交换机中都是以Tagged的形式来被处理和转发的， 因此交换机必须给端口收到的Untagged数据帧添加上Tag**。 **为了实现此目的， 必须为交换机配置端口的缺省VLAN。 当该端口收到Untagged数据帧时， 交换机将给它加上该缺省VLAN的VLAN Tag。**



![wps2](E:\班里\网络基础\网络基础整理与答案\第八章 VLAN及VLAN间路由-day4\images\wps2.png)

支持VLAN技术的交换机的端口分为以下三种：**access端口**、**trunk端口**及Hybrid端口**Access端口**是交换机上用来连接用户主机的端口， 它只能连接接入链路，并且只能允许唯一的VLAN ID通过本端口。



### Access端口收发数据帧的规则如下：



**\1.** 如果该端口收到对端设备**发送的帧是untagged**（不带VLAN标签） ，**交换机**将强制**加上该端口的PVID**。 **如果该**端口收到对端设备**发送的帧是tagged**（带VLAN标签） ， 交换机会检查该标签内的VLAN ID。当VLAN ID与该端口的PVID相同时， 接收该报文。 **当VLAN ID与该端口的PVID不同时， 丢弃该报文。**

** 

![wps3](E:\班里\网络基础\网络基础整理与答案\第八章 VLAN及VLAN间路由-day4\images\wps3.png)

**\2.Access端口发送数据帧时， 总是先剥离帧的Tag， 然后再发送。端口发往对**

**Trunk端口**是交换机上用来和其他交换机连接的端口， 它只能连接干道链路。 Trunk端口允许多个VLAN的帧（带Tag标记） 通过。



### Trunk端口收发数据帧的规则如下：

**\1.** 当接收到对端设备发送的不带Tag的数据帧时， 会添加该端口的PVID， 如果PVID 在允许通过的VLAN ID列表中， 则接收该报文， 否则丢弃该报文。 当接收到对端设备发送的带Tag的数据帧时， 检查VLAN ID是否在允许通过的VLAN ID列表中。 如果VLAN ID在接口允许通过的VLAN ID列表中， 则接收该报文。 否则丢弃该报文。

 

![wps4](E:\班里\网络基础\网络基础整理与答案\第八章 VLAN及VLAN间路由-day4\images\wps4.png)



**2**. 端口发送数据帧时， 当VLAN VLAN 时， 去掉 

Access端口发往其他设备的报文， 都是Untagged数据帧， 而Trunk端口仅在一种特定情况下才能发出untagged数据帧， 其它情况发出的都是Tagged数据帧。



### **Hybrid端口**

是交换机上既可以连接用户主机， 又可以连接其他交换机的端口。 Hybrid端口既可以连接接入链路又可以连接干道链路。 Hybrid端口允许多个VLAN的帧通过， 并可以在出端口方向将某些VLAN帧的Tag剥掉。 华为设备默认的端口类型是Hybrid。

Hybrid端口收发数据帧的规则如下：

**\1**. 当接收到对端设备发送的不带Tag的数据帧时， 会添加该端口的PVID， 如果PVID 在允许通过的VLAN ID列表中， 则接收该报文， 否则丢弃该报文。 当接收到对端设备发送的带Tag的数据帧时， 检查VLAN ID是否在允许通过的VLAN ID列表中。 如果VLAN ID在接口允许通过的VLAN ID列表中， 则接收该报文， 否则丢弃该报文。

**\2.** 

![wps5](E:\班里\网络基础\网络基础整理与答案\第八章 VLAN及VLAN间路由-day4\images\wps5.png)

Hybrid端口发送数据帧时， 将检查该接口是否允许该VLAN数据帧通过。 如果允许

 

## **课后练习题：**

1、接入链路和干道链路有何不同？

2、列表总结对比access、trunk及Hybird端口